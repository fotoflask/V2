<style>

    #follow-button.disabled{
        background-color:#09ae53;
    }
    
#follow-button{
    border: none;
    background-color: #2589cc;
  width: 100px;
  height: 30px;
  top: -10px;
  color: white;
  font-family: "Livvic";
  text-align: center;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  -ms-border-radius: 5px;
  -o-border-radius: 5px;
  border-radius: 5px;
  -webkit-transition-property: all;
  -moz-transition-property: all;
  -o-transition-property: all;
  transition-property: all;
  -webkit-transition-duration: 0.3s;
  -moz-transition-duration: 0.3s;
  -o-transition-duration: 0.3s;
  transition-duration: 0.3s;
  -webkit-transition-timing-function: ease;
  -moz-transition-timing-function: ease;
  -o-transition-timing-function: ease;
  transition-timing-function: ease; }
  #follow-button.enabled:hover {
    background-color: #167abd;
    cursor: pointer; }

    #followform{
        display: flex;
        justify-content :center;
    }
</style> 


    <form method="post" id="followform" action="/follow">
        <input name="followingusername" type="hidden" value="<%= doc4.dusername %>">
        <input name="followinguserid" type="hidden" value="<%= doc4.duserId %>">
        <% if(doc4 && doc4.followers && doc4.followers.includes(user_logged.dusername)){ %>
        <button type="submit" id="follow-button" class="disabled">Following </button>
        <% }else if(doc4.dusername == user_logged.dusername){ %>
            
            <% }else{ %>
                <button type="submit" id="follow-button" class="enabled">Follow</button>
                <% } %>
    </form>
    
    <script src="js/follow.js"></script>
    <!-- <script>
        
// document.getElementById('followform').addEventListener('submit', async (event) => {
//     console.log("INFOLLOW");
//     event.preventDefault();
//     var dusername = 
//                 document.getElementsByName("followingusername").value;
//             var duserId = 
//                 document.getElementsByName("followinguserid").value;

//     var xhr = new XMLHttpRequest();
  
//             // open a connection
//             xhr.open("POST", "/follow");
  
//             // Set the request header
//             xhr.setRequestHeader(
//               "Content-Type", "application/json"
//             );
            
//             // Converting JSON data to string
//             var data = JSON.stringify(
//               { followingusername: dusername  , followinguserid: duserId }
//             );
//             xhr.send(data);
  
//             // Create a state change callback
//             xhr.onreadystatechange = function () {
//                 if (xhr.readyState === 4 &&
//                     xhr.status === 200) {
//                     // Print received data from server
//                     result.innerHTML = this.responseText;
//                 }
//             };


//     // try {
//     //   // Send a POST request to the server with the form data
//     //   console.log("WWW")
//     //   const response = await fetch('/follow', {
//     //     method: 'POST',
//     //     body: JSON.stringify({ followingusername: '<%=doc4.dusername  %>', followinguserid: '<%= doc4.duserId%>' })

//     //   }); 
//     //   console.log(response)

//     //   // Check if the response was successful
//     //   if (response.status == 200) {
//     //     const data = await response.json();
//     //     console.log(yes); // Confirmation message from the server
//     //   } else {
//     //     console.error('Failed to follow user:', response.statusText);
//     //   }
//     // } catch (err) {
//     //   console.error('Failed to follow user:', err);
//     // }
//   });


    </script> -->